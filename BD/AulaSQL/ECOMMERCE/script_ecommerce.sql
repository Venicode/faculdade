create database ECOMMERCE_VITORIA
use ECOMMERCE_VITORIA

CREATE TABLE TB_LINHA(
ID_TB_LINHA INT IDENTITY NOT NULL PRIMARY KEY,
DESCRICAO_LINHA VARCHAR(50) NOT NULL,
COR VARCHAR(20) NOT NULL
)

CREATE TABLE TB_MARCA(
ID_TB_MARCA INT IDENTITY NOT NULL PRIMARY KEY,
DESCRICAO_MARCA VARCHAR(50) NOT NULL
)

CREATE TABLE TB_PRODUTO(
ID_TB_PRODUTO INT IDENTITY NOT NULL PRIMARY KEY,
ID_TB_LINHA INT NOT NULL,
ID_TB_MARCA INT NOT NULL,
PRECO FLOAT NOT NULL

FOREIGN KEY (ID_TB_LINHA) REFERENCES TB_LINHA,
FOREIGN KEY (ID_TB_MARCA) REFERENCES TB_MARCA
)

CREATE TABLE TB_ITEM_PEDIDO(
ID_TB_ITEM_PEDIDO INT IDENTITY NOT NULL PRIMARY KEY,
ID_TB_PRODUTO INT NOT NULL,

FOREIGN KEY (ID_TB_PRODUTO) REFERENCES TB_PRODUTO
)

CREATE TABLE TB_ENDERECO(
ID_TB_ENDERECO INT IDENTITY NOT NULL PRIMARY KEY,
LOGRADOURO VARCHAR(10) NOT NULL,
RUA VARCHAR(20) NOT NULL,
BAIRRO VARCHAR(20) NOT NULL,
CIDADE VARCHAR(30) NOT NULL,
UF VARCHAR(2) NOT NULL,
CEP VARCHAR(9) NOT NULL,
COMPLEMENTO VARCHAR(10)
)

CREATE TABLE TB_CLIENTE(
ID_TB_CLIENTE INT IDENTITY NOT NULL PRIMARY KEY,
NOME VARCHAR(50) NOT NULL,
EMAIL VARCHAR(60) NOT NULL,
CPF VARCHAR(11) NOT NULL,
ID_ENDERECO INT NOT NULL,

FOREIGN KEY (ID_ENDERECO) REFERENCES TB_ENDERECO
)

CREATE TABLE TB_PEDIDO(
ID_TB_PEDIDO INT IDENTITY NOT NULL PRIMARY KEY,
ID_TB_PRODUTO INT NOT NULL,
ID_TB_CLIENTE INT NOT NULL,

FOREIGN KEY (ID_TB_CLIENTE) REFERENCES TB_CLIENTE,
FOREIGN KEY (ID_TB_PRODUTO) REFERENCES TB_PRODUTO
)

CREATE TABLE TB_MOVIMENTACAO(
ID_TB_MOVIMENTACAO INT IDENTITY NOT NULL PRIMARY KEY,
ID_TB_PEDIDO INT NOT NULL,
STATUS_PEDIDO VARCHAR(10) NOT NULL,

FOREIGN KEY (ID_TB_PEDIDO) REFERENCES TB_PEDIDO
)

CREATE TABLE TB_ESTOQUE(
ID_TB_ESTOQUE INT IDENTITY NOT NULL PRIMARY KEY,
ID_TB_PRODUTO INT NOT NULL,
QUANTIDADE INT NOT NULL,
ESTOQUE_MINIMO INT NOT NULL,

FOREIGN KEY (ID_TB_PRODUTO) REFERENCES TB_PRODUTO
)

CREATE TABLE TB_FORMA_PAGAMENTO(
ID_TB_FORMA_PAGAMENTO INT IDENTITY NOT NULL PRIMARY KEY,
DESCRICAO VARCHAR(20) NOT NULL
)

CREATE TABLE TB_PAGAMENTO(
ID_TB_PAGAMENTO INT IDENTITY NOT NULL PRIMARY KEY,
ID_TB_PEDIDO INT NOT NULL,
ID_TB_FORMA_PAGAMENTO INT NOT NULL,

FOREIGN KEY (ID_TB_PEDIDO) REFERENCES TB_PEDIDO,
FOREIGN KEY(ID_TB_FORMA_PAGAMENTO) REFERENCES TB_FORMA_PAGAMENTO
)
